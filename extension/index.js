(()=>{"use strict";var e={700:(e,t,i)=>{var r=i(659);e.exports=function(e){(0,r.timekeeper)(e)}},860:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Time=void 0;var i=function(){function e(e){this.rawInSecond=e;var t=Math.abs(e),i=Math.floor(t/3600),r=Math.floor(t%3600/60),n=Math.floor(t%60),o=(e<0?"-":"")+(i>0?i.toString().padStart(2,"0")+":":"")+r.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0");this.display=o}var t;return t=e,e.make=function(e){return new t(e)},e}();t.Time=i},561:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Timekeeper=void 0;var r=i(770),n=i(860),o=function(){function e(e,t){this.countdownOffset=0;var i=r.Run.new();i.pushSegment(r.Segment.new("Finish"));var n=r.Timer.new(i);if(!n)throw new Error("Failed to create livesplit timer!");n.setLoadingTimes(r.TimeSpan.fromSeconds(0)),e&&this.initExistsTime(n,e),n.initializeGameTime(),this.livesplit=n,t&&t>0&&(this.countdownOffset=t)}return e.prototype.start=function(){var e=this.livesplit.currentPhase();if(this.livesplit.start(),this.livesplit.pause(),this.livesplit.setGameTime(r.TimeSpan.fromSeconds(0)),this.livesplit.resume(),0!==e)throw new Error("This would be nothing happened. You need to reset to start timer.")},e.prototype.pause=function(){var e=this.livesplit.currentPhase();if(this.livesplit.pause(),1!==e)throw new Error("This would be nothing happened. You can pause timer only when it's running.");return this.currentTime},e.prototype.resume=function(){var e=this.livesplit.currentPhase();if(this.livesplit.resume(),3!==e)throw new Error("This would be nothing happened. You can resume timer only when it's paused.")},e.prototype.finish=function(){this.livesplit.split();var e=this.currentTime;return this.livesplit.reset(!1),e},e.prototype.initExistsTime=function(e,t){return e.start(),e.pause(),e.setGameTime(r.TimeSpan.fromSeconds(t)),e},Object.defineProperty(e.prototype,"status",{get:function(){switch(this.livesplit.currentPhase()){case 3:return"paused";case 1:return"in_progress";default:return"finished"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){var e=this.currentTimeSeconds;return n.Time.make(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTimeSeconds",{get:function(){var e,t=(null===(e=this.livesplit.currentTime().gameTime())||void 0===e?void 0:e.totalSeconds())||0;return this.countdownOffset>0?this.countdownOffset-Math.floor(t):t},enumerable:!1,configurable:!0}),e}();t.Timekeeper=o},659:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.timekeeper=void 0;var r=i(561),n=i(860);t.timekeeper=function(e){var t,i,o=e.bundleConfig.tickRateMs||100,s=(null===(t=e.bundleConfig.countdown)||void 0===t?void 0:t.enabled)||!1,a=(null===(i=e.bundleConfig.countdown)||void 0===i?void 0:i.offsetSeconds)||0,u=s?n.Time.make(a).display:"00:00",l=s?a:0,p=e.Replicant("timekeeping",{defaultValue:{time:{display:u,rawInSecond:l},status:"finished"}}),c=e.Replicant("history",{defaultValue:[]}),d=s?new r.Timekeeper(a-p.value.time.rawInSecond,a):new r.Timekeeper(p.value.time.rawInSecond);"in_progress"===p.value.status&&d.resume(),setInterval((function(){var e=d.currentTime,t=d.status;p.value={time:e,status:t}}),o),e.listenFor("start",(function(e,t){if(!t||!t.handled){try{d.start()}catch(e){t&&e instanceof Error&&t(e)}t&&t(null)}})),e.listenFor("pause",(function(e,t){if(!t||!t.handled)try{var i=d.pause();t&&t(null,i)}catch(e){t&&e instanceof Error&&t(e)}})),e.listenFor("resume",(function(e,t){if(!t||!t.handled){try{d.resume()}catch(e){t&&e instanceof Error&&t(e)}t&&t(null)}})),e.listenFor("finish",(function(e,t){var i,r;if(!t||!t.handled)try{var n=d.finish();i=n,r=new Date,c.value.push({time:i,finishedAt:r.valueOf()}),t&&t(null,n)}catch(e){t&&e instanceof Error&&t(e)}})),e.listenFor("reset-history",(function(e,t){t&&t.handled||(c.value=[],t&&t(null))})),e.listenFor("edit-time",(function(e,t){if(!t||!t.handled){var i=e.split(":");2===i.length&&i.unshift("00");var n=3600*Number(i[0])+60*Number(i[1])+Number(i[2]);d=s?new r.Timekeeper(a-n,a):new r.Timekeeper(n),t&&t(null)}}))}},770:e=>{e.exports=require("livesplit-core")}},t={},i=function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,i),o.exports}(700);module.exports=i})();